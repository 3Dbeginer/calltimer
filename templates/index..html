<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Knock Knock</title>
    <style>
      .btn {
        display: inline-block;
        padding: 10px 20px;
        font-size: 16px;
        text-align: center;
        text-decoration: none;
        background-color: #2196F3;
        color: #fff;
        border-radius: 5px;
        margin: 10px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>원장님 호출기</h1>
    <p>체어에 맞는 버튼을 눌러주세요</p>
    <div>
      <a href="#" class="btn" id="btn-1">1번체어</a>
      <a href="#" class="btn" id="btn-2">2번체어</a>
      <a href="#" class="btn" id="btn-3">3번체어</a>
      <a href="#" class="btn" id="btn-4">4번체어</a>
      <a href="#" class="btn" id="btn-5">5번체어</a>
    </div>
    <div id="result"></div>
    <script>
      // 버튼 클릭 이벤트 핸들러 함수
      function playBuzzer(btnId) {
        // 버튼 클릭 시 버저 울림 메시지 출력
        document.getElementById("result").innerHTML = "원장님 호출 중...";
        
        // XMLHttpRequest 객체를 이용하여 서버에 요청을 보내고, 응답 받기
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/play-buzzer-" + btnId);
        xhr.onreadystatechange = function() {
          if (xhr.readyState === 4) {
            if (xhr.status === 200) {
              // 요청이 성공적으로 처리되면 버저 울림 완료 메시지 출력
              document.getElementById("result").innerHTML = "호출 완료!";
            } else {
              // 요청이 실패하면 오류 메시지 출력
              document.getElementById("result").innerHTML = "에러 발생!";
            }
          }
        };
        xhr.send();
      }
      
      // 버튼 클릭 이벤트 등록
      document.getElementById("btn-1").addEventListener("click", function() {
        playBuzzer(1);
      });
      document.getElementById("btn-2").addEventListener("click", function() {
        playBuzzer(2);
      });
      document.getElementById("btn-3").addEventListener("click", function() {
        playBuzzer(3);
        
      });
      document.getElementById("btn-4").addEventListener("click", function() {
        playBuzzer(4);
        
      });
      document.getElementById("btn-5").addEventListener("click", function() {
        playBuzzer(5);
        
      });
    </script>
  </body>
</html>
